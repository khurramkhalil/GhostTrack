# GhostTrack Configuration for Qwen2.5-1.5B
# 28 layers, 1536 hidden dim

project:
  name: GhostTrack
  version: 1.0.0
  description: Multi-Hypothesis Tracking for Qwen2.5-1.5B

model:
  base_model: Qwen/Qwen2.5-1.5B
  d_model: 1536
  n_layers: 28
  device: cuda

sae:
  architecture: JumpReLU
  d_model: 1536
  d_hidden: 6144  # 4x expansion ratio
  threshold: 0.1
  lambda_sparse: 0.01

sae_training:
  epochs: 20
  batch_size: 64
  learning_rate: 0.0001
  weight_decay: 0.0
  gradient_clip: 1.0
  num_tokens: 100000000
  max_length: 512
  validation_every: 1000
  target_recon_loss: 0.01
  target_sparsity_min: 50
  target_sparsity_max: 100

paths:
  data_dir: ./data
  cache_dir: ./data/cache/qwen
  models_dir: ./models/checkpoints/qwen
  results_dir: ./results/qwen
  logs_dir: ./logs/qwen

tracking:
  # Using "Sensitive" settings found effective for Phi-2
  top_k_features: 100
  semantic_weight: 0.6
  activation_weight: 0.2
  position_weight: 0.2
  association_threshold: 0.5
  birth_threshold: 0.3
  death_threshold: 0.1

detection:
  entropy_threshold: 1.5
  churn_threshold: 0.3
  entropy_weight: 0.4
  churn_weight: 0.3
  ml_weight: 0.3
  threshold: 0.5

dataset:
  primary: truthful_qa
  split_train: 0.7
  split_val: 0.15
  split_test: 0.15
  stratify_by: category
