# GhostTrack Configuration for Phi-2
# 32 layers, 2560 hidden dim

project:
  name: GhostTrack
  version: 1.0.0
  description: Multi-Hypothesis Tracking for Microsoft Phi-2

model:
  base_model: microsoft/phi-2
  d_model: 2560
  n_layers: 32
  device: cuda

sae:
  architecture: JumpReLU
  d_model: 2560
  d_hidden: 10240  # 4x expansion ratio (conservative start)
  threshold: 0.1
  lambda_sparse: 0.01

sae_training:
  epochs: 20
  batch_size: 64  # Smaller batch size for larger model
  learning_rate: 0.0001
  weight_decay: 0.0
  gradient_clip: 1.0
  num_tokens: 100000000
  max_length: 512
  validation_every: 1000
  target_recon_loss: 0.01
  target_sparsity_min: 50
  target_sparsity_max: 100

paths:
  data_dir: ./data
  cache_dir: ./data/cache/phi-2
  models_dir: ./models/checkpoints/phi-2
  results_dir: ./results/phi-2
  logs_dir: ./logs/phi-2

tracking:
  top_k_features: 50
  semantic_weight: 0.6
  activation_weight: 0.2
  position_weight: 0.2
  association_threshold: 0.5
  birth_threshold: 0.5
  death_threshold: 0.1

detection:
  entropy_threshold: 1.5
  churn_threshold: 0.3
  entropy_weight: 0.4
  churn_weight: 0.3
  ml_weight: 0.3
  threshold: 0.5

dataset:
  primary: truthful_qa
  split_train: 0.7
  split_val: 0.15
  split_test: 0.15
  stratify_by: category
